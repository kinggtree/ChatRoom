### 🚀 一个简单的聊天室软件

🔍 **代码说明**
- `www`文件：整合两个路由。
- `apiRouter.js` 和 `app.js`：管理Express路由。
- `wsServer`：处理WebSocket服务器逻辑。

🛠 **已知问题**
1. **错误处理不统一**: 不同组件有不同处理错误的方式，方式不够统一
2. **路由意外调用问题**: /api/getUserInfo 在ChatInterface中会被意外调用一次(问题貌似与子组件有关，但问题本身不严重)
3. **布局问题**：页面布局简单，消息展示可优化。
4. **验证问题**：项目基于`session`来验证权限，或许基于`cookie`的方法会更佳。
5. **更新显示问题**: 好友的新加入和删除无法触发页面和组件的刷新
6. **没有参数配置**: 很多参数无法简单配置，如数据库名称，服务器端口等
7. **安全性问题**: 未使用HTTPS

🗓 **项目开发日志**

---

#### 9.27 - 🛠 基础框架搭建
- **✅ 完成**
    - 搭建前端的基础框架
- **🚧 待解决**
    - 界面美观性尚待考虑
    - 消息部分未进行测试

---

#### 10.6 - 📡 实现基础聊天功能
- **✅ 完成**
    - `session`验证
    - 数据库访问用户
    - 用户登录与登出功能
    - 消息发送（已存入数据库）
    - `wss`基础架构搭建
- **🚧 待解决**
    - WebSocket前端尚未调用
    - 研究WebSocket的使用方法和如何利用它实时显示消息

---

#### 10.7 - 🎉 完成基本聊天功能
- **✅ 完成**
    - 成功实现最基础的聊天功能
    - 修改了很多API，使其更完善更正确
    - 学会了在mongoose查询中，使用async和await的方法
    - 实现了添加好友，注册用户的功能
    - 将密码储存转换为bcrypt方法
- **🚧 待解决**
    - 通讯录实时刷新问题
    - 消息刷新方式问题
    - 无法显示当前聊天对象

---

#### 10.8 - 🚩 解决许多问题
- **✅ 完成**
    - 更改了API和前端处理message的方式
    - 实现了消息数据库更新后将更新的消息传入前端
    - 改用MongoDB副本集
- **🚧 待解决**
    - MongoDB副本集未经测试，还没有搭建

---

#### 10.9 - 📻 完成消息实时接收
- **✅ 完成**
    - 成功搭建mongodb副本集(详情见txt文件)
    - 完成了消息的发送和实时接收（简单实现）
    - 优化了添加好友的布局
    - 我方添加好友后，对方无需再添加一次
    - 联系人列表在添加好友后更新
    - 新插入数据库的消息需要过滤（确认收件人和发件人）后发送


- **🚧 待解决**
    - 服务器客户端之间传输数据格式混乱

---

#### 10.10 - 🎈 功能调整
- **✅ 完成**
    - 添加了一键启动和停止副本集的脚本

---

### 10.12 - 🎁 功能完善
- **✅ 完成**
    - 完成了个人主页面的功能
    - 重构了文件夹逻辑和主页面逻辑
    - 实现了头像功能
    - 实现了性别功能（和头像有联动）
    - 实现了修改个人简介功能
- **🚧 待解决**
    - 好友的新加入和删除无法触发页面和组件的刷新

---

### 10.12 - 🛠 继续完善功能，修复BUG
- **✅ 完成**
    - 修复了好友可以重复添加的问题
    - 对话框中可以显示聊天对象
    - 收到对方发来的新消息后可以更新
    - 服务器端口5000可以被访问，但是会返回404页面
    - 稍微优化了一下界面，实现了联系人列表的自动隐藏
    - 用crypto实现每小时生成随机字符串用于验权
    - 

- **🚧 待解决**
    - 部署貌似有问题
    - mongodb在云上貌似无法正常使用

